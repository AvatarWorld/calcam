

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tomography Geometry Matrices &mdash; Calcam  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="next" title="Examples" href="api_examples.html" />
    <link rel="prev" title="CAD Models" href="api_cadmodel.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html">
          

          
            
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                Version 2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="intro_general.html">Genral Introduction to Calcam</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro_theory.html">Camera Calibration Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_theory.html#camera-model">Camera Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_theory.html#perspective-distortion-model">Perspective Distortion Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_theory.html#fisheye-distirtion-model">Fisheye Distirtion Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_theory.html#underlying-opencv-documentation">Underlying OpenCV Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intro_install_setup.html">Installation &amp; Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_install_setup.html#dependencies">Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_install_setup.html#download-installation">Download &amp; Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_install_setup.html#cad-models-and-image-sources">CAD Models and Image Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_install_setup.html#upgrading-from-calcam-1-x">Upgrading from Calcam 1.x</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="intro_conventions.html">Concepts &amp; Conventions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro_conventions.html#image-pixel-coordinates">Image Pixel Coordinates</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_conventions.html#sub-views">Sub-views</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro_conventions.html#cad-models">CAD Models</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">GUI App User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gui_intro.html">Calcam GUI tools and launcher</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_intro.html#starting-the-launcher">Starting the launcher</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui_calib.html">Calibration by point fitting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#loading-an-image-to-calibrate">Loading an Image to Calibrate</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#image-mouse-navigation">Image Mouse Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#current-image-settings">Current Image Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#loading-and-manipulating-a-cad-model">Loading and manipulating a CAD model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#defining-calibration-points">Defining Calibration Points</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#fitting-the-camera-model">Fitting the camera model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_calib.html#saving-loading-and-viewing-calibration-information">Saving / Loading and viewing calibration information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui_alignment_calib.html">Calibration by manual alignment</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_alignment_calib.html#loading-an-image-to-calibrate">Loading an Image to Calibrate</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_alignment_calib.html#current-image-settings">Current Image Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_alignment_calib.html#loading-a-cad-model">Loading a CAD model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_alignment_calib.html#performing-the-alignment-calibration">Performing the alignment calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_alignment_calib.html#saving-loading-and-viewing-calibration-information">Saving / Loading and viewing calibration information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui_virtual_calib.html">&#8220;Virtual&#8221; Calibrations</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_virtual_calib.html#loading-a-cad-model">Loading a CAD model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_virtual_calib.html#creating-the-virtual-calibration">Creating the Virtual Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_virtual_calib.html#saving-loading-and-viewing-calibration-information">Saving / Loading and viewing calibration information</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui_image_analyser.html">Image Analyser</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_image_analyser.html#loading-an-image-to-analyse">Loading an image to analyse</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_image_analyser.html#loading-a-calibration">Loading a Calibration</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_image_analyser.html#loading-a-cad-model">Loading a CAD model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_image_analyser.html#performing-position-analysis">Performing Position Analysis</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui_viewer.html">3D Viewer</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#loading-a-cad-model">Loading a CAD model</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#turning-cad-model-parts-on-off">Turning CAD model parts On/Off</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#cad-model-appearance-settings">CAD model appearance settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#wall-contour-display">Wall contour display</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#mouse-navigation">Mouse Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#d-viewport-tab">3D ViewPort Tab</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#visualising-camera-fields-of-view">Visualising camera fields of view</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#displaying-arbitrary-3d-lines">Displaying Arbitrary 3D Lines</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_viewer.html#rendering-and-saving-images">Rendering and saving images</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui_settings.html">Calcam Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui_settings.html#cad-model-definition-settings">CAD Model Definition Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_settings.html#image-source-settings">Image Source Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui_settings.html#environment-information">Environment Information</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">API User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api_analysis.html">Using Calibration Results</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_analysis.html#the-calibration-class">The Calibration Class</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_analysis.html#rendering-images">Rendering images</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_analysis.html#ray-casting">Ray casting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_cadmodel.html">CAD Models</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tomography Geometry Matrices</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#reconstruction-grids">Reconstruction grids</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api_examples.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api_examples.html#mapping-a-magnetic-field-line-on-to-an-image">Mapping a magnetic field line on to an image</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_examples.html#rendering-camera-view-wireframe">Rendering: camera view wireframe</a></li>
<li class="toctree-l2"><a class="reference internal" href="api_examples.html#ray-casting">Ray casting</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dev_imsources.html">Image Sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev_imsources.html#return-format-of-image-loading-function">Return format of image loading function</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_imsources.html#structure-of-get-image-arguments">Structure of get_image_arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_imsources.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_imsources.html#adding-to-calcam">Adding to Calcam</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dev_coord_formatter.html">3D Coordinate Formatters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="dev_coord_formatter.html#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_coord_formatter.html#note-on-sub-module-and-function-names">Note on sub-module and function names</a></li>
<li class="toctree-l2"><a class="reference internal" href="dev_coord_formatter.html#adding-to-a-cad-model">Adding to a CAD model</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Calcam</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Tomography Geometry Matrices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tomography-geometry-matrices">
<h1>Tomography Geometry Matrices<a class="headerlink" href="#tomography-geometry-matrices" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="calcam.GeometryMatrix">
<em class="property">class </em><code class="descclassname">calcam.</code><code class="descname">GeometryMatrix</code><span class="sig-paren">(</span><em>grid</em>, <em>raydata</em>, <em>pixel_order='F'</em>, <em>cull_grid=True</em>, <em>n_processes=15</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.GeometryMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to represent a scalar geometry matrix and associated metadata.</p>
<p>A new geometry matrix can be created by instantiating this class
with the below parameters, or a saved geometry matrix can be loaded
from disk using the GeometryMatrix.load() class method.</p>
<p>The matrix itself can be accessed in the &#8220;data&#8221; attribute, where it is
stored as a sparse matrix using the scipy.sprase.csr_matrix class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>grid</strong> (<a class="reference internal" href="#calcam.PoloidalPolyGrid" title="calcam.PoloidalPolyGrid"><em>calcam.PoloidalPolyGrid</em></a>) &#8211; Reconstruction grid to use</li>
<li><strong>raydata</strong> (<a class="reference internal" href="api_analysis.html#calcam.RayData" title="calcam.RayData"><em>calcam.RayData</em></a>) &#8211; Ray data for the camera to be inverted</li>
<li><strong>pixel_order</strong> (<em>str</em>) &#8211; What pixel order to use when flattening                                           the 2D image array in to the 1D data vector.                                           Default &#8216;F&#8217; goes verticallytop-to-bottom, column-by-column,                                           alternatively &#8216;C&#8217; goes horizontally left-to-right,  row-by-row.</li>
<li><strong>cull_grid</strong> (<em>bool</em>) &#8211; Whether to remove grid cells without any sight-line coverage from the grid.</li>
<li><strong>n_processes</strong> (<em>int</em>) &#8211; For multi-CPU machines, how many execution processes to                                           use for calculations: calculation speeds up ~linearly with                                           number of processes. Default is 1 fewer than the number of CPUs present.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="classmethod">
<dt id="calcam.GeometryMatrix.load">
<em class="property">classmethod </em><code class="descname">load</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.GeometryMatrix.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a Calcam saved geometry matrix from disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) &#8211; File name to load from. Can be a                                NumPy (.npz), MATLAB (.mat) or                               zipped ASCII (.zip) file.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Loaded geometry matrix.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#calcam.GeometryMatrix" title="calcam.GeometryMatrix">calcam.GeometryMatrix</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.GeometryMatrix.plot_coverage">
<code class="descname">plot_coverage</code><span class="sig-paren">(</span><em>metric='n_los'</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.GeometryMatrix.plot_coverage" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot various metrics related to the coverage of the inversion grid
by the camera sight-lines.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>metric</strong> (<em>str</em>) &#8211; What metric to plot. Options are:                               &#8216;l_tot&#8217; - total sight-line length                               intersecting each grid cell.                               &#8216;n_los&#8217; - number of lines-of-sight                               intersecting each grid cell.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.GeometryMatrix.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.GeometryMatrix.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Save the geometry matrix to a file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>filename</strong> (<em>str</em>) &#8211; File name to save to, including file extension.                              The file extension determines the format to be saved:                              &#8216;.npz&#8217; for compressed NumPy binary format,                              &#8216;.mat&#8217; for MATLAB format or
&#8216;.zip&#8217; for Zipped collection of ASCII files.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<div class="section" id="reconstruction-grids">
<h2>Reconstruction grids<a class="headerlink" href="#reconstruction-grids" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="calcam.PoloidalPolyGrid">
<em class="property">class </em><code class="descclassname">calcam.</code><code class="descname">PoloidalPolyGrid</code><span class="sig-paren">(</span><em>vertices</em>, <em>cells</em>, <em>wall_contour=None</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for representing tomographic reconstruction grids with
polygonal grid cells in the R, Z plane. Grid cells can be arbitrary
polygons but all cells in the grid must all have the same number of
sides.</p>
<p>Grids can be constructed by directly instantiating this class with the
following parameters, or alternatively  a number of convenience
functions are provided for easily creating various types of grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>vertices</strong> (<em>np.ndarray</em>) &#8211; (N_verts x 2) array of floats containing the                                    (R,Z) coordinates of the grid cell vertices.</li>
<li><strong>cells</strong> (<em>np.ndarray</em>) &#8211; (N_cells x N_verts_per_cell) array of integers                                    specifying which vertices (indexes in to the vertices                                    array) define each grid cell. For each cell (array row),                                    the vertices must be listed in order around the                                    cell perimeter (in either direction).</li>
<li><strong>wall_contour</strong> (<em>np.ndaray</em>) &#8211; Nx2 array containing the R,Z wall contour of the machine.                                    If provided, this is used for plotting purposes.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="calcam.PoloidalPolyGrid.get_cell_intersections">
<code class="descname">get_cell_intersections</code><span class="sig-paren">(</span><em>ray_start</em>, <em>ray_end</em>, <em>plot=False</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.get_cell_intersections" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the intersections of a ray, i.e. a straight line
in 3D space, with the grid cell boundaries.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ray_start</strong> (<em>sequence</em>) &#8211; 3-element sequence containing the X,Y,Z coordinates                                    of the ray&#8217;s start position.</li>
<li><strong>ray_end</strong> (<em>sequence</em>) &#8211; 3-element sequence containing the X,Y,Z coordinates                                    of the ray&#8217;s end position.</li>
<li><strong>plot</strong> (<em>bool</em>) &#8211; If set to True, the function will also plot the ray                                    in R,Z and red circles at each intersection location.                                    Mainly intended for debugging and algorithm demonstration.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>Intersection information:</p>
<blockquote>
<div><ul class="simple">
<li>NumPy array containing the lengths along the ray where intersections                         with grid cell boundaries lines were found (in order from start to end of the ray).</li>
<li>list of lists containing the indices of the grid cell(s) which were involved                         in  each intersection. Each intersection will be associated with 1 or more grid cells.</li>
</ul>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.get_extent">
<code class="descname">get_extent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.get_extent" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the R,Z extent of the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">4-element tuple of floats containing the                     grid extent Rmin,Rmax,Zmin,Zmax</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">tuple</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.n_cells">
<code class="descname">n_cells</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.n_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of grid cells.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of grid cells</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.n_segments">
<code class="descname">n_segments</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.n_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of line segments in the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of grid cells</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.n_vertices">
<code class="descname">n_vertices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.n_vertices" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of vertices in the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of vertices.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>data=None</em>, <em>clim=None</em>, <em>cmap=None</em>, <em>line_colour=(0</em>, <em>0</em>, <em>0)</em>, <em>cell_linewidth=None</em>, <em>cblabel=None</em>, <em>axes=None</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Either plot a given data vector on the grid, or if no data vector is given,
plot the grid itself.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> (<em>array</em>) &#8211; Data to plot on the grid. Must be a 1D array with as many elements                                               as there are grid cells. If not given, only the grid structure is plotted.</li>
<li><strong>clim</strong> (<em>sequence or None</em>) &#8211; 2 element sequence giving the colourmap limits for the data [min,max].                                               If set to None, the data min and max are used.</li>
<li><strong>cmap</strong> (<em>str or None</em>) &#8211; Name of the matplotlib colourmap to use to display the data. If not given,                                               matplotlib&#8217;s default colourmap will be used.</li>
<li><strong>line_colour</strong> (<em>sequence or None</em>) &#8211; 3-element sequence of values between 0 and 1 specifying the R,G,B                                               colour with which to draw the wall contour and grid cell boundaries.                                               If set to None, the wall and cell boundaries are not drawn.</li>
<li><strong>cell_linewidth</strong> (<em>float</em>) &#8211; Line width to use to show the grid cell boundaries. If set to 0, the grid                                               cell boundaries will not be drawn.</li>
<li><strong>cblabel</strong> (<em>str</em>) &#8211; Label for the data colour bar</li>
<li><strong>axes</strong> (<em>matplotlib.pyplot.Axes</em>) &#8211; Matplotlib axes on which to plot. If not given, a new figure will be created.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>MatPlotLib objects for the plot:</p>
<blockquote>
<div><ul class="simple">
<li>matplotlib.axes.Axes                    : The matplotlib axes containing the plot.</li>
<li>matplotlib.collections.PatchCollection  : PatchCollection containing the patches used to show the data and                                                                 grid cells. This object has useful methods for further adjusting                                                                 the plot like set_cmap(), set_clim() etc.</li>
<li>list of matplotlib.lines.Line2D         : List of matpltolib line objects making up the wall contour.</li>
</ul>
</div></blockquote>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">tuple</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.remove_cells">
<code class="descname">remove_cells</code><span class="sig-paren">(</span><em>cell_inds</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.remove_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove grid cells with the given indices from the grid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cell_inds</strong> (<em>sequence</em>) &#8211; Sequence of integers specifying which                                    cell indices to remove.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="calcam.PoloidalPolyGrid.verts_per_cell">
<code class="descname">verts_per_cell</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#calcam.PoloidalPolyGrid.verts_per_cell" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the number of vertices per grid cell.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Number of vertices per cell</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">int</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<div class="section" id="creating-commonly-used-grid-types">
<h3>Creating commonly used grid types<a class="headerlink" href="#creating-commonly-used-grid-types" title="Permalink to this headline">¶</a></h3>
<p>The following functions are provided for convenience to easily generate some commonly used types of grid.</p>
<dl class="function">
<dt id="calcam.gm.squaregrid">
<code class="descclassname">calcam.gm.</code><code class="descname">squaregrid</code><span class="sig-paren">(</span><em>wall_contour</em>, <em>cell_size</em>, <em>rmin=None</em>, <em>rmax=None</em>, <em>zmin=None</em>, <em>zmax=None</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.gm.squaregrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a reconstruction grid with square grid cells.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>wall_contour</strong> (<em>str or np.ndarray</em>) &#8211; Either the name of a Calcam CAD model                                            from which to use the wall contour, or an                                            N x 2 array of R,Z points defining the machine wall.</li>
<li><strong>cell_size</strong> (<em>float</em>) &#8211; Side length of each grid cell in metres.</li>
<li><strong>rmax, zmin, zmax</strong> (<em>rmin,</em>) &#8211; Optional limits of the grid extent in the R, Z plane.                                            Any combination of these may or may not be given; if none                                            are given the entire wall contour interior is gridded.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Generated grid.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="#calcam.PoloidalPolyGrid" title="calcam.PoloidalPolyGrid">calcam.PoloidalPolyGrid</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="calcam.gm.trigrid">
<code class="descclassname">calcam.gm.</code><code class="descname">trigrid</code><span class="sig-paren">(</span><em>wall_contour</em>, <em>max_cell_area</em>, <em>rmin=None</em>, <em>rmax=None</em>, <em>zmin=None</em>, <em>zmax=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#calcam.gm.trigrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a reconstruction grid with triangular grid cells conforming to the
wall contour. Generated using J. Shewchuk&#8217;s &#8220;triangle&#8221; via the MeshPy module.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>wall_contour</strong> (<em>str or np.ndarray</em>) &#8211; Either the name of a Calcam CAD model                                            from which to use the wall contour, or an                                            N x 2 array of R,Z points defining the machine wall.</li>
<li><strong>max_cell_area</strong> (<em>float</em>) &#8211; Maximum area of a grid cell area in square metres.</li>
<li><strong>rmax, zmin, zmax</strong> (<em>rmin,</em>) &#8211; Optional limits of the grid extent in the R, Z plane.                                            Any combination of these may or may not be given; if none                                            are given the entire wall contour interior is gridded.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Any additional keyword arguments will be passed directly to the triangle mesher, meshpy.triangle.build().
This can be used to further control the meshing; see the MeshPy documentation for available arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Generated grid.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="#calcam.PoloidalPolyGrid" title="calcam.PoloidalPolyGrid">calcam.PoloidalPolyGrid</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api_examples.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="api_cadmodel.html" class="btn btn-neutral" title="CAD Models" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2018, European Atomic Energy Community (EURATOM)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'./',
              VERSION:'',
              LANGUAGE:'en',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  false,
              SOURCELINK_SUFFIX: ''
          };
      </script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>